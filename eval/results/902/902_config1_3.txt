class Solution:
    
    def atMostNGivenDigitSet(self, digits: List[str], n: int) -> int:
        
        s = str(n)
        (m, d_len) = (len(s), len(digits))
        res = sum((d_len ** i for i in range(1, m)))
        for i in range(m):
            c = sum((x < s[i] for x in digits))
            res += c * d_len ** (m - i - 1)
            if s[i] not in digits:
                return res
        return res + 1